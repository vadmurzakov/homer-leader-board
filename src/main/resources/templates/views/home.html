<div class="page-header">
    <h1><a href="/">Статистика по ЦК {{ckName}}</a> *</h1>
    <p class="lead">
        за последние {{countMonth}} месяцев
        <span class="right">
                 <a href="/">Homer</a>
                 <a href="#!/liferay" style="margin-left: 10px;">Liferay</a>
             </span>
    </p>
    *
    <mark>учитываются задачи, на которые списано более 10 мин</mark>
</div>

<div class="row">
    <div class="col-md-12">
        <uib-progressbar value="progressBar" min="0" max="100" type="success" ng-show="isProgressBarShow"
                         class="progress-striped active animate-show-hide">
            <b>{{progressBar}}%</b>
        </uib-progressbar>

        <table st-table="rowCollection" class="table table-striped">
            <thead>
            <tr>
                <!--фио-->
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('fullname')">пользователь</a>
                    <span ng-show="propertyName == 'fullname' &amp;&amp; !reverse" class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'fullname' &amp;&amp; reverse" class="fa fa-caret-up"></span>
                </th>
                <!--капасити-->
                <th>
                    <a href="javascript:void(0)">dev/bug</a>
                    <span ng-show="propertyName == 'issueStatistics[5].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[5].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <!--разработка-->
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[5].time')">разработка</a>
                    <span ng-show="propertyName == 'issueStatistics[5].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[5].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <!--баги-->
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[2].count')">баги</a>
                    <span ng-show="propertyName == 'issueStatistics[2].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[2].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <!--аналитика-->
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[3].count')">аналитика</a>
                    <span ng-show="propertyName == 'issueStatistics[3].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[3].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <!--патчи-->
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[4].count')">патчи</a>
                    <span ng-show="propertyName == 'issueStatistics[4].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[4].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>

                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[0].count')">обычных багов</a>
                    <span ng-show="propertyName == 'issueStatistics[0].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[0].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[1].count')">продуктовых багов</a>
                    <span ng-show="propertyName == 'issueStatistics[1].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[1].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[0].time/issueStatistics[0].count')">в
                        среднем
                        на обычный баг</a>
                    <span ng-show="propertyName == 'issueStatistics[0].time/issueStatistics[0].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[0].time/issueStatistics[0].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>
                <th>
                    <a href="javascript:void(0)" ng-click="sortBy('issueStatistics[1].time/issueStatistics[1].count')">в
                        среднем
                        на продуктовый баг</a>
                    <span ng-show="propertyName == 'issueStatistics[1].time/issueStatistics[1].count' &amp;&amp; !reverse"
                          class="fa fa-caret-down"></span>
                    <span ng-show="propertyName == 'issueStatistics[1].time/issueStatistics[1].count' &amp;&amp; reverse"
                          class="fa fa-caret-up"></span>
                </th>


            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="user in users | orderBy:propertyName:!reverse">
                <!--фио-->
                <td ng-style="{'background-color':propertyName == 'fullname'?'rgba(217, 237, 247, 0.32)':''}">
                    <img src="{{user.avatarUri}}" class="img-circle" width="48" alt="avatar"/>
                    {{user.fullname}}
                </td>
                <!--капасити-->
                <td ng-style="{'background-color':propertyName == 'issueStatistics[5].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{((user.issueStatistics[5].time + user.issueStatistics[3].time) / ((user.issueStatistics[5].time + user.issueStatistics[2].time + user.issueStatistics[3].time) / 100)).toFixed(1)}}%   /
                    {{(user.issueStatistics[2].time / ((user.issueStatistics[5].time + user.issueStatistics[2].time + user.issueStatistics[3].time) / 100)).toFixed(1)}}%
                </td>
                <!--разработка-->
                <td ng-style="{'background-color':propertyName == 'issueStatistics[5].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{user.issueStatistics[5].count}} шт за {{(user.issueStatistics[5].time / 60).toFixed(1)}} ч
                </td>
                <!--баги-->
                <td ng-style="{'background-color':propertyName == 'issueStatistics[2].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{user.issueStatistics[2].count}} шт за {{(user.issueStatistics[2].time / 60).toFixed(1)}} ч
                </td>
                <!--аналитика-->
                <td ng-style="{'background-color':propertyName == 'issueStatistics[3].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{user.issueStatistics[3].count}} шт за {{(user.issueStatistics[3].time / 60).toFixed(1)}} ч
                </td>
                <!--патчи-->
                <td ng-style="{'background-color':propertyName == 'issueStatistics[4].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{user.issueStatistics[4].count}} шт за {{(user.issueStatistics[4].time / 60).toFixed(1)}} ч
                </td>

                <td ng-style="{'background-color':propertyName == 'issueStatistics[0].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{user.issueStatistics[0].count}} шт за {{(user.issueStatistics[0].time / 60).toFixed(1)}} ч
                </td>
                <td ng-style="{'background-color':propertyName == 'issueStatistics[1].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{user.issueStatistics[1].count}} шт за {{(user.issueStatistics[1].time / 60).toFixed(1)}} ч
                </td>
                <td ng-style="{'background-color':propertyName == 'issueStatistics[0].time/issueStatistics[0].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{((user.issueStatistics[0].time / user.issueStatistics[0].count)/60).toFixed(1)}} ч
                </td>
                <td ng-style="{'background-color':propertyName == 'issueStatistics[1].time/issueStatistics[1].count'?'rgba(217, 237, 247, 0.32)':''}">
                    {{((user.issueStatistics[1].time / user.issueStatistics[1].count)/60).toFixed(1)}} ч
                </td>


            </tr>
            </tbody>
        </table>
    </div>
</div>

